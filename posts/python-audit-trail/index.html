<!doctype html><html lang="de-DE" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Building an Audit Trail with Quart, MongoDB, and Redis" /><meta property="og:locale" content="de_DE" /><meta name="description" content="Building an Audit Trail with Quart, MongoDB, and Redis" /><meta property="og:description" content="Building an Audit Trail with Quart, MongoDB, and Redis" /><link rel="canonical" href="https://madchristian.github.io/posts/python-audit-trail/" /><meta property="og:url" content="https://madchristian.github.io/posts/python-audit-trail/" /><meta property="og:site_name" content="Christian Strube" /><meta property="og:image" content="https://images.cstrube.de/uploads/original/77/28/363f54392a114a7b929b4a21ad6c.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-06-28T15:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://images.cstrube.de/uploads/original/77/28/363f54392a114a7b929b4a21ad6c.webp" /><meta property="twitter:title" content="Building an Audit Trail with Quart, MongoDB, and Redis" /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-03-18T10:34:14+01:00","datePublished":"2023-06-28T15:00:00+02:00","description":"Building an Audit Trail with Quart, MongoDB, and Redis","headline":"Building an Audit Trail with Quart, MongoDB, and Redis","image":{"lqip":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/2wBDAQcHBw0MDRgQEBgUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAPABQDAREAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAgMEBgf/xAArEAABAwMBAw0AAAAAAAAAAAACARESAAMEIQUxUQYTFSIjM0FTYnGCodH/xAAYAQEAAwEAAAAAAAAAAAAAAAACAAMEAf/EACQRAAEDAgQHAAAAAAAAAAAAAAEAAhEDEgQiUWETIUFSkrLi/9oADAMBAAIRAxEAPwDL8jbmZiLbW1klbt3EIU3aKK6u4lxrokkgIVC1oBIm5KLlnti2CAOQpiSusVD76lMMdqqDiGaHy+VK6ay25yfbThL1Si8dz0J5StVuaN1Xci4tyzaHJtmAgpwJ0R3XXfwqCQTCFVrXAXGIlDbDCTzF+QflMOfoqODS7vVFPIk0C76Tv4zePvVfRbJzTuv/2Q==","url":"https://images.cstrube.de/uploads/original/77/28/363f54392a114a7b929b4a21ad6c.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://madchristian.github.io/posts/python-audit-trail/"},"url":"https://madchristian.github.io/posts/python-audit-trail/"}</script><title>Building an Audit Trail with Quart, MongoDB, and Redis | Christian Strube</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Christian Strube"><meta name="application-name" content="Christian Strube"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://images.cstrube.de/blog/images/mein-avatar/christian_space.webp" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">Christian Strube</a></div><div class="site-subtitle fst-italic">Technology, AI and Life</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>STARTSEITE</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>KATEGORIEN</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIV</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ÜBER</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/madchristian" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://bsky.app/profile/madchristian.bsky.social" aria-label="bluesky" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-bluesky"></i> </a> <a href="javascript:location.href = 'mailto:' + ['christian','cstrube.de'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/christian-strube-b93217102/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Startseite </a> </span> <span>Building an Audit Trail with Quart, MongoDB, and Redis</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Eintrag</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Suche..." > </span> <span id="search-cancel">Abbrechen</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>Building an Audit Trail with Quart, MongoDB, and Redis</h1><div class="post-meta text-muted"> <span> Veröffentlicht <em class="" data-ts="1687957200" data-df="DD/MM/YYYY" data-bs-toggle="tooltip" data-bs-placement="bottom" > 28/06/2023 </em> </span> <span> Aktualisiert <em class="" data-ts="1742290454" data-df="DD/MM/YYYY" data-bs-toggle="tooltip" data-bs-placement="bottom" > 18/03/2025 </em> </span><div class="mt-3 mb-3"> <a href="https://images.cstrube.de/uploads/original/77/28/363f54392a114a7b929b4a21ad6c.webp" class="popup img-link preview-img"><img data-src="https://images.cstrube.de/uploads/original/77/28/363f54392a114a7b929b4a21ad6c.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/2wBDAQcHBw0MDRgQEBgUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAPABQDAREAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAgMEBgf/xAArEAABAwMBAw0AAAAAAAAAAAACARESAAMEIQUxUQYTFSIjM0FTYnGCodH/xAAYAQEAAwEAAAAAAAAAAAAAAAACAAMEAf/EACQRAAEDAgQHAAAAAAAAAAAAAAEAAhEDEgQiUWETIUFSkrLi/9oADAMBAAIRAxEAPwDL8jbmZiLbW1klbt3EIU3aKK6u4lxrokkgIVC1oBIm5KLlnti2CAOQpiSusVD76lMMdqqDiGaHy+VK6ay25yfbThL1Si8dz0J5StVuaN1Xci4tyzaHJtmAgpwJ0R3XXfwqCQTCFVrXAXGIlDbDCTzF+QflMOfoqODS7vVFPIk0C76Tv4zePvVfRbJzTuv/2Q==" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> Von <em> <a href="https://twitter.com/madchristian404">Christian Strube</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1311 Wörter" > <em>7 Minuten</em> lesen</span></div></div></div><div class="post-content"><h1 id="building-an-audit-trail-with-quart-mongodb-and-redis">Building an Audit Trail with Quart, MongoDB, and Redis</h1><p>In this post, we will explore how to build an Audit Trail system using Quart for Python, MongoDB, and Redis. This will involve implementing MongoDB for data storage, Quart for the web server and API, and Redis for caching data. We will create several API routes for managing audit entries in a MongoDB database.</p><h2 id="introduction-to-the-modules"><span class="me-2">Introduction to the Modules</span><a href="#introduction-to-the-modules" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Our code is organized in several modules. Each module is responsible for handling specific aspects of the audit trail system.</p><h3 id="the-audittraildbmanager-class"><span class="me-2">The <code class="language-plaintext highlighter-rouge">AuditTrailDBManager</code> Class</span><a href="#the-audittraildbmanager-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The <code class="language-plaintext highlighter-rouge">AuditTrailDBManager</code> is defined in <code class="language-plaintext highlighter-rouge">app/common/managers/audittraildbmanager.py</code>. This class is responsible for managing the operations of the <code class="language-plaintext highlighter-rouge">AuditTrailDB</code>, which is a MongoDB database that we use for storing our audit trail entries. It provides methods for connecting to the MongoDB server, inserting documents, finding documents based on a query, updating documents, deleting documents, and saving and loading model data.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">AuditTrailDBManager</span><span class="p">(</span><span class="n">IMongoDB</span><span class="p">,</span> <span class="n">IDependency</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    AuditTrailDBManager is a class for managing the AuditTrailDB operations.</span><span class="sh">"""</span>
    <span class="bp">...</span>
</pre></table></code></div></div><p>The <code class="language-plaintext highlighter-rouge">AuditTrailDBManager</code> uses the <code class="language-plaintext highlighter-rouge">motor</code> library for making asynchronous MongoDB operations.</p><h3 id="the-quart-api-routes"><span class="me-2">The Quart API Routes</span><a href="#the-quart-api-routes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We have defined our API routes in <code class="language-plaintext highlighter-rouge">app/quart/routes/mongo_api_routes.py</code>. We use the Quart library for Python to create these routes. Quart allows us to create API routes in a manner similar to Flask, but with support for Python’s <code class="language-plaintext highlighter-rouge">asyncio</code> library for asynchronous operations.</p><p>Our API has several routes:</p><ul><li><code class="language-plaintext highlighter-rouge">/apiv3/audit_trail/check-port</code>: Checks if the API is running.<li><code class="language-plaintext highlighter-rouge">/apiv3/audit_trail/entries</code>: Supports the <code class="language-plaintext highlighter-rouge">POST</code> method for creating a new audit entry and the <code class="language-plaintext highlighter-rouge">GET</code> method for retrieving audit entries.<li><code class="language-plaintext highlighter-rouge">/apiv3/audit_trail/entries/&lt;entry_id&gt;</code>: Supports the <code class="language-plaintext highlighter-rouge">PUT</code> method for updating an audit entry with a given ID, and the <code class="language-plaintext highlighter-rouge">DELETE</code> method for deleting an audit entry with a given ID.</ul><p>Here is a code snippet for one of the routes:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nd">@audit_trail_api_blueprint.route</span><span class="p">(</span><span class="sh">'</span><span class="s">/entries</span><span class="sh">'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">POST</span><span class="sh">'</span><span class="p">])</span>
<span class="nd">@verify_jwt_token</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">create_audit_entry</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">
    Erstellt einen neuen Audit-Eintrag.</span><span class="sh">"""</span>
    <span class="bp">...</span>
</pre></table></code></div></div><p>Each route function uses the <code class="language-plaintext highlighter-rouge">@verify_jwt_token</code> decorator, which verifies the JWT token for user authentication.</p><p>The API routes interact with the MongoDB database through the <code class="language-plaintext highlighter-rouge">AuditTrailDataController</code>.</p><h3 id="the-audittraildatacontroller-class"><span class="me-2">The <code class="language-plaintext highlighter-rouge">AuditTrailDataController</code> Class</span><a href="#the-audittraildatacontroller-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The <code class="language-plaintext highlighter-rouge">AuditTrailDataController</code> is responsible for controlling the data of the audit trail. It uses the <code class="language-plaintext highlighter-rouge">AuditTrailDBManager</code> to interact with the MongoDB database.</p><p>The <code class="language-plaintext highlighter-rouge">AuditTrailDataController</code> is initialized before the first request to the Quart application is made:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nd">@audit_trail_api_blueprint.before_app_first_request</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">init_audit_trail_data_controller</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">
    Initialisiert den AuditTrailDataController</span><span class="sh">"""</span>
    <span class="bp">...</span>
</pre></table></code></div></div><h2 id="redis-for-caching"><span class="me-2">Redis for Caching</span><a href="#redis-for-caching" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To reduce the load on the MongoDB server and speed up our application, we use Redis for caching the results of the <code class="language-plaintext highlighter-rouge">GET</code> requests. We store the results of each unique query in Redis. The next time the same query is made, we return the cached results from Redis instead of querying the MongoDB database again.</p><p>Here is a code snippet for the</p><p><code class="language-plaintext highlighter-rouge">GET</code> request route that uses Redis:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nd">@audit_trail_api_blueprint.route</span><span class="p">(</span><span class="sh">'</span><span class="s">/entries</span><span class="sh">'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">GET</span><span class="sh">'</span><span class="p">])</span>
<span class="nd">@verify_jwt_token</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_audit_entries</span><span class="p">():</span>
    <span class="bp">...</span>
    <span class="c1"># Erhalte Redis-Instanz
</span>    <span class="n">redis</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">get_redis</span><span class="p">()</span>

    <span class="c1"># Konvertiere query dict in str für den Gebrauch mit Redis
</span>    <span class="n">query_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">cached_entries</span> <span class="o">=</span> <span class="k">await</span> <span class="n">redis</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">query_str</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">cached_entries</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">...</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="n">audittrail_data_controller</span><span class="p">.</span><span class="nf">get_audit_entries</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="bp">...</span>
</pre></table></code></div></div><p>In this code snippet, we get the Redis instance and then convert the query dictionary into a string to use with Redis. If the query results are already cached in Redis, we return those results. Otherwise, we get the audit entries from MongoDB and store the results in Redis for future requests.</p><h2 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>We have discussed how to build an audit trail system using Quart for Python, MongoDB, and Redis. The system provides API routes for managing audit entries stored in a MongoDB database and uses Redis for caching query results. The <code class="language-plaintext highlighter-rouge">AuditTrailDBManager</code> class manages the MongoDB operations, and the <code class="language-plaintext highlighter-rouge">AuditTrailDataController</code> controls the audit trail data. This system is a good example of how to use Quart, MongoDB, and Redis together to create a highly efficient and scalable web application.</p><p>In future posts, we’ll further dive into the usage of Quart and other technologies to build highly scalable microservices. Stay tuned!</p><hr /><hr /><h1 id="aufbau-eines-audit-trail-mit-quart-mongodb-und-redis">Aufbau eines Audit-Trail mit Quart, MongoDB und Redis</h1><p>In diesem Beitrag werden wir untersuchen, wie man ein Audit Trail System mit Quart für Python, MongoDB und Redis erstellt. Dabei implementieren wir MongoDB für die Datenspeicherung, Quart für den Webserver und die API sowie Redis zur Zwischenspeicherung von Daten. Wir werden mehrere API-Routen erstellen, um Audit-Einträge in einer MongoDB-Datenbank zu verwalten.</p><h3 id="einführung-in-die-module"><span class="me-2">Einführung in die Module</span><a href="#einführung-in-die-module" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Unser Code ist in mehrere Module organisiert. Jedes Modul ist für bestimmte Aspekte des Audit Trail Systems zuständig.</p><hr /><h2 id="die-klasse-audittraildbmanager"><span class="me-2">Die Klasse “AuditTrailDBManager”</span><a href="#die-klasse-audittraildbmanager" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Der “AuditTrailDBManager” ist in “app/common/managers/audittraildbmanager.py” definiert. Diese Klasse ist für die Verwaltung der Operationen der “AuditTrailDB” zuständig, einer MongoDB-Datenbank, in der wir unsere Audit Trail Einträge speichern. Sie bietet Methoden zum Verbinden mit dem MongoDB-Server, zum Einfügen von Dokumenten, zum Suchen von Dokumenten basierend auf einer Abfrage, zum Aktualisieren von Dokumenten, zum Löschen von Dokumenten sowie zum Speichern und Laden von Modelldaten.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">AuditTrailDBManager</span><span class="p">(</span><span class="n">IMongoDB</span><span class="p">,</span> <span class="n">IDependency</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    AuditTrailDBManager ist eine Klasse zur Verwaltung der AuditTrailDB-Operationen.</span><span class="sh">"""</span>
    <span class="bp">...</span>
</pre></table></code></div></div><p>Der “AuditTrailDBManager” verwendet die Motor-Bibliothek für asynchrone MongoDB-Operationen.</p><hr /><h2 id="die-quart-api-routen"><span class="me-2">Die Quart-API-Routen</span><a href="#die-quart-api-routen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Wir haben unsere API-Routen in “app/quart/routes/mongo_api_routes.py” definiert. Wir verwenden die Quart-Bibliothek für Python, um diese Routen zu erstellen. Quart ermöglicht es uns, API-Routen ähnlich wie Flask zu erstellen, unterstützt jedoch die asynchrone Funktionalität von Pythons asyncio-Bibliothek.</p><h3 id="unsere-api-hat-mehrere-routen"><span class="me-2">Unsere API hat mehrere Routen:</span><a href="#unsere-api-hat-mehrere-routen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><code class="language-plaintext highlighter-rouge">/apiv3/audit_trail/check-port</code>: Überprüft, ob die API läuft.<li><code class="language-plaintext highlighter-rouge">/apiv3/audit_trail/entries</code>: Unterstützt die POST-Methode zum Erstellen eines neuen Audit-Eintrags und die GET-Methode zum Abrufen von Audit-Einträgen.<li><code class="language-plaintext highlighter-rouge">/apiv3/audit_trail/entries/&lt;entry_id&gt;</code>: Unterstützt die PUT-Methode zum Aktualisieren eines Audit-Eintrags mit einer bestimmten ID und die DELETE-Methode zum Löschen eines Audit-Eintrags mit einer bestimmten ID.</ul><p>Hier ist ein Code-Schnipsel für eine der Routen:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nd">@audit_trail_api_blueprint.route</span><span class="p">(</span><span class="sh">'</span><span class="s">/entries</span><span class="sh">'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">POST</span><span class="sh">'</span><span class="p">])</span>
<span class="nd">@verify_jwt_token</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">create_audit_entry</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">
    Erstellt einen neuen Audit-Eintrag.</span><span class="sh">"""</span>
    <span class="bp">...</span>
</pre></table></code></div></div><p>Jede Routenfunktion verwendet den Dekorator “@verify_jwt_token”, der das JWT-Token für die Benutzerauthentifizierung überprüft.</p><p>Die API-Routen interagieren über den “AuditTrailDataController” mit der MongoDB-Datenbank.</p><hr /><h2 id="die-klasse-audittraildatacontroller"><span class="me-2">Die Klasse “AuditTrailDataController”</span><a href="#die-klasse-audittraildatacontroller" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Der “AuditTrailDataController” ist für die Steuerung der Daten des Audit Trails zuständig. Er verwendet den “AuditTrailDBManager”, um mit der MongoDB-Datenbank zu interagieren.</p><p>Der “AuditTrailDataController” wird initialisiert, bevor die erste Anfrage an die Quart-Anwendung gestellt wird:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="o">@</span>

<span class="n">audit_trail_api_blueprint</span><span class="p">.</span><span class="n">before_app_first_request</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">init_audit_trail_data_controller</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">
    Initialisiert den AuditTrailDataController.</span><span class="sh">"""</span>
    <span class="bp">...</span>
</pre></table></code></div></div><hr /><h2 id="redis-zur-zwischenspeicherung"><span class="me-2">Redis zur Zwischenspeicherung</span><a href="#redis-zur-zwischenspeicherung" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Um die Belastung des MongoDB-Servers zu reduzieren und unsere Anwendung zu beschleunigen, verwenden wir Redis zur Zwischenspeicherung der Ergebnisse der GET-Anfragen. Wir speichern die Ergebnisse jeder eindeutigen Abfrage in Redis. Beim nächsten Mal, wenn dieselbe Abfrage gestellt wird, geben wir die zwischengespeicherten Ergebnisse aus Redis zurück, anstatt die MongoDB-Datenbank erneut abzufragen.</p><p>Hier ist ein Code-Schnipsel für die GET-Anfrage-Route, die Redis verwendet:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nd">@audit_trail_api_blueprint.route</span><span class="p">(</span><span class="sh">'</span><span class="s">/entries</span><span class="sh">'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">GET</span><span class="sh">'</span><span class="p">])</span>
<span class="nd">@verify_jwt_token</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_audit_entries</span><span class="p">():</span>
    <span class="bp">...</span>
    <span class="c1"># Hole Redis-Instanz
</span>    <span class="n">redis</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">get_redis</span><span class="p">()</span>

    <span class="c1"># Konvertiere query dict in str für die Verwendung mit Redis
</span>    <span class="n">query_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">cached_entries</span> <span class="o">=</span> <span class="k">await</span> <span class="n">redis</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">query_str</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">cached_entries</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">...</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="n">audittrail_data_controller</span><span class="p">.</span><span class="nf">get_audit_entries</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="bp">...</span>
</pre></table></code></div></div><p>In diesem Code-Schnipsel holen wir die Redis-Instanz und konvertieren dann das Abfrage-Dictionary in einen String, um es mit Redis zu verwenden. Wenn die Abfrageergebnisse bereits in Redis zwischengespeichert sind, geben wir diese Ergebnisse zurück. Andernfalls holen wir die Audit-Einträge aus MongoDB und speichern die Ergebnisse in Redis für zukünftige Anfragen.</p><p>Fazit</p><p>Wir haben besprochen, wie man ein Audit Trail System mit Quart für Python, MongoDB und Redis erstellt. Das System bietet API-Routen zur Verwaltung von Audit-Einträgen, die in einer MongoDB-Datenbank gespeichert sind, und verwendet Redis zur Zwischenspeicherung von Abfrageergebnissen. Die Klasse “AuditTrailDBManager” verwaltet die MongoDB-Operationen und der “AuditTrailDataController” steuert die Audit Trail Daten. Dieses System ist ein gutes Beispiel dafür, wie man Quart, MongoDB und Redis zusammen verwendet, um eine hoch effiziente und skalierbare Webanwendung zu erstellen.</p><p>In zukünftigen Beiträgen werden wir noch weiter auf den Einsatz von Quart und anderen Technologien zur Entwicklung hoch skalierbarer Microservices eingehen. Bleiben Sie dran!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/programming/'>Programming</a>, <a href='/categories/python/'>Python</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/audittrail/" class="post-tag no-text-decoration" >auditTrail</a> <a href="/tags/webdevelopment/" class="post-tag no-text-decoration" >webDevelopment</a> <a href="/tags/backend/" class="post-tag no-text-decoration" >backend</a> <a href="/tags/microservices/" class="post-tag no-text-decoration" >microservices</a> <a href="/tags/quart/" class="post-tag no-text-decoration" >quart</a> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >mongodb</a> <a href="/tags/redis/" class="post-tag no-text-decoration" >redis</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Dieser Eintrag ist vom Autor unter <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> lizensiert.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Teilen</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Building%20an%20Audit%20Trail%20with%20Quart,%20MongoDB,%20and%20Redis%20-%20Christian%20Strube&url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fpython-audit-trail%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Building%20an%20Audit%20Trail%20with%20Quart,%20MongoDB,%20and%20Redis%20-%20Christian%20Strube&u=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fpython-audit-trail%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fpython-audit-trail%2F&text=Building%20an%20Audit%20Trail%20with%20Quart,%20MongoDB,%20and%20Redis%20-%20Christian%20Strube" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fpython-audit-trail%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Link kopieren" data-title-succeed="Link erfolgreich kopiert!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Kürzlich aktualisiert</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/tunneldebugger/">TunnelDebugger Support</a><li class="text-truncate lh-lg"> <a href="/posts/Apple-Content-Cache-Grafana-Dashboard/">Apple Content Cache mit Grafana und Prometheus überwachen – Schritt-für-Schritt-Anleitung</a><li class="text-truncate lh-lg"> <a href="/posts/swift-apns/">Apple Push Notification Service mit Quart und Python: Ein Leitfaden</a><li class="text-truncate lh-lg"> <a href="/posts/swift-parken-app-0-0-4/">Parken App und Backend - Updates und Bugfixes</a><li class="text-truncate lh-lg"> <a href="/posts/swift-parken-app-0-0-5/">Parken App Updates 0.0.5</a></ul></div><div id="access-tags"><div class="panel-heading">Beliebte Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/networking/">networking</a> <a class="post-tag btn btn-outline-primary" href="/tags/swiftui/">swiftui</a> <a class="post-tag btn btn-outline-primary" href="/tags/backend/">backend</a> <a class="post-tag btn btn-outline-primary" href="/tags/combine/">combine</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">iOS</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/nginx/">nginx</a> <a class="post-tag btn btn-outline-primary" href="/tags/webserver/">webserver</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Inhalt</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Weiterlesen</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/pyhton-building-api-routes-with-quart/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1688144400" data-df="DD/MM/YYYY" > 30/06/2023 </em><h4 class="pt-0 my-2" data-toc-skip>Building API Routes with Quart</h4><div class="text-muted small"><p> Building API Routes with Quart In this blog post, we’ll go over how to use the Quart library in Python to create API endpoints. Quart is a Python ASGI web microframework whose API is a superset of...</p></div></div></a></div><div class="col"> <a href="/posts/python-Fehlersuche-beim-Einrichten-einer-DB-Verbindung-in-Quart/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1688248800" data-df="DD/MM/YYYY" > 02/07/2023 </em><h4 class="pt-0 my-2" data-toc-skip>Fehlersuche beim Einrichten einer Datenbank-Verbindung in Quart</h4><div class="text-muted small"><p> Fehlersuche beim Einrichten einer Datenbank-Verbindung in Quart Die Fehlermeldung KeyError: &#39;USER_DB_MANAGER&#39; in einer Quart-Anwendung kann auftreten, wenn versucht wird, auf ein Konfigurationsele...</p></div></div></a></div><div class="col"> <a href="/posts/swift-parken-app-0-0-4/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1690326216" data-df="DD/MM/YYYY" > 26/07/2023 </em><h4 class="pt-0 my-2" data-toc-skip>Parken App und Backend - Updates und Bugfixes</h4><div class="text-muted small"><p> Wir freuen uns, Ihnen die neuesten Aktualisierungen und Bugfixes für unsere Parken App und das zugehörige Backend vorstellen zu können. Wir arbeiten kontinuierlich daran, die Benutzererfahrung zu v...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/pyhton-quart-hypercorn/" class="btn btn-outline-primary" prompt="Eintrag vorher" ><p>Pyhton Quart Hypercorn</p></a> <a href="/posts/swift-debugging-network-requests-in-ios/" class="btn btn-outline-primary" prompt="Nächster Eintrag" ><p>Debugging Network Requests in iOS with Swift</p></a></div><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'Madchristian/Madchristian.github.io', 'data-repo-id': 'R_kgDOHkSiUQ', 'data-category': 'Posts', 'data-category-id': 'DIC_kwDOHkSiUc4CoKuq', 'data-mapping': 'pathname', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'de', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Beliebte Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/networking/">networking</a> <a class="post-tag btn btn-outline-primary" href="/tags/swiftui/">swiftui</a> <a class="post-tag btn btn-outline-primary" href="/tags/backend/">backend</a> <a class="post-tag btn btn-outline-primary" href="/tags/combine/">combine</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">iOS</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/nginx/">nginx</a> <a class="post-tag btn btn-outline-primary" href="/tags/webserver/">webserver</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme</p><p>© 2025 <a href="https://twitter.com/madchristian404">Christian Strube</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Alle Einträge auf dieser Seite stehen, soweit nicht anders angegeben, unter der Lizenz Creative Commons Attribution 4.0 (CC BY 4.0)." >Einige Rechte vorbehalten.</span></p></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">Eine neue Version ist verfügbar.</p><button type="button" class="btn btn-primary" aria-label="Update"> Neue Version </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/de.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RMF96QTHNP"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RMF96QTHNP'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
