<!doctype html><html lang="de-DE" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="ACCpromAdapter App – Monitoring und Analyse von Apple Content Cache Metriken" /><meta property="og:locale" content="de_DE" /><meta name="description" content="ACCpromAdapter" /><meta property="og:description" content="ACCpromAdapter" /><link rel="canonical" href="https://madchristian.github.io/posts/swift-ACCpromAdapter-App/" /><meta property="og:url" content="https://madchristian.github.io/posts/swift-ACCpromAdapter-App/" /><meta property="og:site_name" content="Christian Strube" /><meta property="og:image" content="https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0001-swift-ACCpromAdapter-App-79b055b2-5fc7-4710-bdbd-b0a008886c4d.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-03-02T17:38:03+01:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0001-swift-ACCpromAdapter-App-79b055b2-5fc7-4710-bdbd-b0a008886c4d.webp" /><meta property="twitter:title" content="ACCpromAdapter App – Monitoring und Analyse von Apple Content Cache Metriken" /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-03-18T10:20:36+01:00","datePublished":"2025-03-02T17:38:03+01:00","description":"ACCpromAdapter","headline":"ACCpromAdapter App – Monitoring und Analyse von Apple Content Cache Metriken","image":{"lqip":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAgMDAwMDBAcFBAQEBAkGBwUHCgkLCwoJCgoMDREODAwQDAoKDhQPEBESExMTCw4UFhQSFhESExL/2wBDAQMDAwQEBAgFBQgSDAoMEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhL/wAARCAALABQDAREAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAABAgFBgf/xAAkEAACAgIBBAIDAQAAAAAAAAABAgMEBREGABIhMRNhB0Fxkf/EABgBAAMBAQAAAAAAAAAAAAAAAAIDBQQG/8QAJREAAgEDAwQCAwAAAAAAAAAAAQIRAAMhBAVREiIxQRNhgZHR/9oADAMBAAIRAxEAPwBOPx5wObkLyyVo61GukDzRz5KQQRsVGwgZvZbet+h7J6v9pkA1w+6bmmjROsFixAhQTE+/xW2YSHgvC8XUfmmawVbIySuZoVAtiWsyKyNCY9qJQQ66bwdg78ecGpsXHJ6Tj9Z/lDt+8Ev2actH1A4zPGDVI5FyLjOcykl7G1RVqT+YIplX5AmyF7u0a7ta3rp+jsMtkBzJrfqrjm6Sojxgcxmlul5Tl8iCl/I2rIkUBvlk7zofrZ9D66YltFwoir91i4ljPupPFXJqkqSVnMToCqsoAKgjyB/dn/eiGPFTr1tXBDCRRT5O1F2pFYkRFXSqp0AProuo80r4kOSK/9k=","url":"https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0001-swift-ACCpromAdapter-App-79b055b2-5fc7-4710-bdbd-b0a008886c4d.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://madchristian.github.io/posts/swift-ACCpromAdapter-App/"},"url":"https://madchristian.github.io/posts/swift-ACCpromAdapter-App/"}</script><title>ACCpromAdapter App – Monitoring und Analyse von Apple Content Cache Metriken | Christian Strube</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Christian Strube"><meta name="application-name" content="Christian Strube"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://images.cstrube.de/blog/images/mein-avatar/christian_space.webp" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">Christian Strube</a></div><div class="site-subtitle fst-italic">Technology, AI and Life</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>STARTSEITE</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>KATEGORIEN</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIV</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ÜBER</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/madchristian" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://bsky.app/profile/madchristian.bsky.social" aria-label="bluesky" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-bluesky"></i> </a> <a href="javascript:location.href = 'mailto:' + ['christian','cstrube.de'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/christian-strube-b93217102/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Startseite </a> </span> <span>ACCpromAdapter App – Monitoring und Analyse von Apple Content Cache Metriken</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Eintrag</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Suche..." > </span> <span id="search-cancel">Abbrechen</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>ACCpromAdapter App – Monitoring und Analyse von Apple Content Cache Metriken</h1><div class="post-meta text-muted"> <span> Veröffentlicht <em class="" data-ts="1740933483" data-df="DD/MM/YYYY" data-bs-toggle="tooltip" data-bs-placement="bottom" > 02/03/2025 </em> </span> <span> Aktualisiert <em class="" data-ts="1742289636" data-df="DD/MM/YYYY" data-bs-toggle="tooltip" data-bs-placement="bottom" > 18/03/2025 </em> </span><div class="mt-3 mb-3"> <a href="https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0001-swift-ACCpromAdapter-App-79b055b2-5fc7-4710-bdbd-b0a008886c4d.webp" class="popup img-link preview-img"><img data-src="https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0001-swift-ACCpromAdapter-App-79b055b2-5fc7-4710-bdbd-b0a008886c4d.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAgMDAwMDBAcFBAQEBAkGBwUHCgkLCwoJCgoMDREODAwQDAoKDhQPEBESExMTCw4UFhQSFhESExL/2wBDAQMDAwQEBAgFBQgSDAoMEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhL/wAARCAALABQDAREAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAABAgFBgf/xAAkEAACAgIBBAIDAQAAAAAAAAABAgMEBREGABIhMRNhB0Fxkf/EABgBAAMBAQAAAAAAAAAAAAAAAAIDBQQG/8QAJREAAgEDAwQCAwAAAAAAAAAAAQIRAAMhBAVREiIxQRNhgZHR/9oADAMBAAIRAxEAPwBOPx5wObkLyyVo61GukDzRz5KQQRsVGwgZvZbet+h7J6v9pkA1w+6bmmjROsFixAhQTE+/xW2YSHgvC8XUfmmawVbIySuZoVAtiWsyKyNCY9qJQQ66bwdg78ecGpsXHJ6Tj9Z/lDt+8Ev2actH1A4zPGDVI5FyLjOcykl7G1RVqT+YIplX5AmyF7u0a7ta3rp+jsMtkBzJrfqrjm6Sojxgcxmlul5Tl8iCl/I2rIkUBvlk7zofrZ9D66YltFwoir91i4ljPupPFXJqkqSVnMToCqsoAKgjyB/dn/eiGPFTr1tXBDCRRT5O1F2pFYkRFXSqp0AProuo80r4kOSK/9k=" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> Von <em> <a href="https://twitter.com/madchristian404">Christian Strube</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1366 Wörter" > <em>7 Minuten</em> lesen</span></div></div></div><div class="post-content"><h1 id="accpromadapter">ACCpromAdapter</h1><p><strong>Version:</strong> 1.0<br /> <strong>Author:</strong> Christian Strube<br /> <strong>License:</strong> MIT —</p><p>Die <a href="https://github.com/Madchristian/ACCpromAdapter"><strong>ACCPromAdapter App</strong></a> ist eine innovative macOS-Anwendung, die speziell dafür entwickelt wurde, die Metriken des Apple Content Cache zu überwachen und in einem Prometheus-kompatiblen Format bereitzustellen. Dank ihrer flexiblen Architektur können Administratoren und DevOps-Teams die Caching-Infrastruktur bequem visualisieren – etwa in Grafana. Zusätzlich bieten wir mit dem <strong>ACCPromAdapterDaemon</strong> eine Lösung für headless Installationen an, bei denen der Dienst automatisch beim Systemstart aktiv ist und Metriken auch ohne Benutzeranmeldung sammelt.</p><h2 id="was-ist-accpromadapter"><span class="me-2">Was ist ACCPromAdapter?</span><a href="#was-ist-accpromadapter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>ACCPromAdapter verbindet sich mit dem Apple Content Cache und liest die Metriken aus der zugehörigen <strong>Metrics.db</strong> aus. Die App entscheidet intelligent, ob sie die Metriken von einem extern laufenden Daemon (HTTP-Server) oder über den direkten Zugriff auf die lokale Datenbank bezieht. Diese duale Strategie stellt sicher, dass immer aktuelle Daten zur Verfügung stehen – unabhängig davon, ob der externe Dienst verfügbar ist oder nicht.</p><h2 id="hauptfunktionen"><span class="me-2">Hauptfunktionen</span><a href="#hauptfunktionen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><strong>Automatische Umgebungserkennung:</strong> Beim Start prüft die App, ob ein externer HTTP-Daemon aktiv ist, der die Metriken bereits bereitstellt. Falls ja, werden diese genutzt; andernfalls greift die App auf die lokale Metrics.db zu.<li><strong>Prometheus-kompatibler Output:</strong> Die Metriken werden in einem Format ausgegeben, das direkt von Prometheus abgefragt werden kann. So lässt sich die App nahtlos in Grafana-Dashboards integrieren.<li><strong>Benutzerfreundliche Menüleisten-Anzeige:</strong> Ein übersichtliches UI in der macOS-Menüleiste zeigt die wichtigsten Metriken an – ergänzt durch einen visuellen Statusindikator, der den aktiven Modus (extern oder lokal) anzeigt.<li><strong>Automatische Aktualisierung:</strong> Die Metriken werden in regelmäßigen 30-Sekunden-Zyklen aktualisiert, wobei ein Fortschrittsbalken den aktuellen Stand des Updates visuell darstellt.<li><strong>Headless Installation mit <a href="https://github.com/Madchristian/ACCpromAdapterDaemon/releases/">ACCPromAdapterDaemon</a>:</strong> Für Umgebungen ohne Benutzeranmeldung, wie z. B. Server oder Headless Mac Minis, bietet der ACCPromAdapterDaemon eine vollständig automatisierte Lösung. Der Daemon startet beim Systemstart und liefert kontinuierlich Metriken, die von Prometheus abgefragt werden können.</ul><hr /><p><a href="https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0002-swift-ACCpromAdapter-App-1e675289-9e76-463b-986e-7dcbe2562a8d.webp" class="popup img-link "><img data-src="https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0002-swift-ACCpromAdapter-App-1e675289-9e76-463b-986e-7dcbe2562a8d.webp" alt="0002-swift-ACCpromAdapter-App-1e675289-9e76-463b-986e-7dcbe2562a8d.jpg!" style="max-width:150px; height:auto;" data-lqip="true" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAkACQAAD/2wBDAAICAgICAQICAgIDAgIDAwYEAwMDAwcFBQQGCAcJCAgHCAgJCg0LCQoMCggICw8LDA0ODg8OCQsQERAOEQ0ODg7/2wBDAQIDAwMDAwcEBAcOCQgJDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg7/wAARCAAdABQDASIAAhEBAxEB/8QAGwAAAQQDAAAAAAAAAAAAAAAAAAIDBAUGBwn/xAArEAABBAEEAQIEBwAAAAAAAAABAgMEEQUABhIhEzFRBxQicRUjQUJhkaL/xAAXAQADAQAAAAAAAAAAAAAAAAABAgME/8QAHxEAAQQCAgMAAAAAAAAAAAAAAQACESEDEhMxkaGx/9oADAMBAAIRAxEAPwDnXjnYDuFivHaGGePi4qUqLMWXDVciUyQL6voAXfWsdzENQzTjyYTOMjuH8tllC0tigLoLWtXr7qPrpeLdjnb0QrLHLhZ5mOFf6QT/AGdIMqG/kI63YsoQwD5BHbbbWr2ohHH19wf401pYChPKbiJYZVEjvK8QWXFpWlSuX1d/XRq6BFdAaNQs0/HTm6iodRH8SPGl0pKwK/cUgC/fr72dGlgoahWGNE53b7HyWL3RIilHELhc1sk9hVcUEH7X76jpl76DXy+DZ3LDgsKLRYbU+4lCgbIpKAEnsWmuvXV3ivi/Mw+2Y2Kh7RwqGGGg2FpfntlagO3CESUp5EkkkJAv9NNYz4w5PF4puKjbmLkvA8n5bsueHpKyKLjhRJSFLNC1UL1sztbjA4zuT3FR5hVwhrydzr7+Std5KVlZOaeXl3pL2QB4vGWVF0EdUrl3Y9jo05uLNHcW65GX/D42HW/RcYglzxlVdrJcWtRUfUkqPejU22JNIOgOIFhf/9k=" class="lazyload" data-proofer-ignore></a></p><h2 id="technische-architektur"><span class="me-2">Technische Architektur</span><a href="#technische-architektur" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Die App ist in <strong>Swift</strong> geschrieben und nutzt moderne Technologien wie <strong>Swift Concurrency (async/await)</strong>, <strong>Combine</strong> und <strong>SwiftNIO</strong> für die Netzwerkkommunikation. Dabei wird ein modularer Ansatz verfolgt:</p><ul><li><strong>AppInitializer:</strong> Verantwortlich für die zentrale Initialisierung der Anwendung und die Entscheidung, ob externe oder lokale Metriken verwendet werden.<li><strong>MetricsCache:</strong> Sammelt und aktualisiert die Metriken aus der lokalen Datenbank, falls kein externer Daemon verfügbar ist.<li><strong>MetricsFetcher:</strong> Holt die Metriken über HTTP, wenn der externe Daemon aktiv ist.<li><strong>PrometheusServer:</strong> Startet einen internen HTTP-Server, der Prometheus-kompatiblen Output liefert – als Fallback, wenn kein externer Dienst vorhanden ist.<li><strong>ACCPromAdapterDaemon:</strong> Ein separater Daemon, der speziell für headless Installationen konzipiert wurde. Er läuft systemweit, sammelt Metriken aus der Metrics.db und stellt sie über einen HTTP-Endpunkt bereit, ohne dass ein Benutzer eingeloggt sein muss.</ul><h2 id="einsatzmöglichkeiten"><span class="me-2">Einsatzmöglichkeiten</span><a href="#einsatzmöglichkeiten" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>ACCPromAdapter eignet sich ideal für:</p><ul><li><strong>Administrator:innen und IT-Teams</strong>, die die Performance und Auslastung ihres Apple Content Cache überwachen möchten.<li><strong>DevOps-Teams</strong>, die Dashboards in Grafana erstellen wollen, um Metriken in Echtzeit zu visualisieren.<li><strong>Headless Umgebungen</strong>, in denen der ACCPromAdapterDaemon dafür sorgt, dass Metriken automatisch auch ohne Benutzeranmeldung gesammelt werden.</ul><h2 id="installation--erste-schritte"><span class="me-2">Installation &amp; Erste Schritte</span><a href="#installation--erste-schritte" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ol><li><strong>ACCPromAdapter App:</strong> Laden Sie die App direkt bei <a href="https://github.com/Madchristian/ACCpromAdapter/releases/tag/publish">Github</a> herunter. Beim ersten Start werden Sie aufgefordert, die <strong>Metrics.db</strong> auszuwählen, um den Lesezugriff zu konfigurieren.<li><strong>ACCPromAdapterDaemon (Optional)</strong>: Laden Sie das Installationspaket (ACCpromAdapterDaemon.pkg) herunter – verfügbar über GitHub oder als Direktdownload im Blog. Installieren Sie den Daemon, der beim Systemstart automatisch aktiviert wird.<li><strong>Monitoring:</strong> Starten Sie die App und beobachten Sie die Metriken in der Menüleiste. Falls der externe Daemon aktiv ist, werden die Metriken von diesem abgerufen.<li><strong>Grafana-Integration:</strong> Konfigurieren Sie Prometheus so, dass es die Metriken von <code class="language-plaintext highlighter-rouge">http://localhost:9200/metrics</code> abruft, und erstellen Sie ein passendes Dashboard in Grafana.</ol><p><a href="https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0002-swift-ACCpromAdapter-App-c62ae52b-fecb-459e-91ca-2e771c9fe4c0.webp" class="popup img-link "><img data-src="https://images.cstrube.de/blog/images/swift-ACCpromAdapter-App/0002-swift-ACCpromAdapter-App-c62ae52b-fecb-459e-91ca-2e771c9fe4c0.webp" alt="0002-swift-ACCpromAdapter-App-c62ae52b-fecb-459e-91ca-2e771c9fe4c0.jpg!" width="600" height="400" data-lqip="true" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAkACQAAD/2wBDAAICAgICAQICAgIDAgIDAwYEAwMDAwcFBQQGCAcJCAgHCAgJCg0LCQoMCggICw8LDA0ODg8OCQsQERAOEQ0ODg7/2wBDAQIDAwMDAwcEBAcOCQgJDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg7/wAARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQHCf/EACIQAAEEAQIHAAAAAAAAAAAAAAEAAgMEEgYRBTEyQVFhcf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDM7XHCaLHC22LCd1bMnI81KFYdfzRRwVA+J8mUYY4CXEEbb+FHkD9QtFd25AOXc+ghKs6T9Qg//9k=" class="lazyload" data-proofer-ignore></a></p><h2 id="fazit"><span class="me-2">Fazit</span><a href="#fazit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>ACCPromAdapter und der <a href="https://github.com/Madchristian/ACCpromAdapterDaemon/releases/tag/Version1">ACCPromAdapterDaemon</a> bieten zusammen eine flexible und robuste Lösung zur Überwachung der Apple Content Cache Metriken. Mit der dualen Strategie – ob über einen externen HTTP-Daemon oder direkt aus der lokalen Datenbank – garantiert die Lösung stets aktuelle und zuverlässige Daten. Dieses innovative Tool hilft Ihnen, die Performance Ihrer Caching-Infrastruktur optimal zu überwachen und Probleme frühzeitig zu erkennen.</p><p>Bleiben Sie dran für weitere Updates und Verbesserungen der ACCPromAdapter App!</p><hr /><p><em>Für Fragen und Feedback stehe ich Ihnen jederzeit zur Verfügung – kontaktieren Sie mich über <a href="https://github.com/MadChristian">GitHub</a> oder per E-Mail.</em></p><hr /><h1 id="english-version">English Version:</h1><h2 id="description"><span class="me-2">Description</span><a href="#description" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>ACCPromAdapter is an innovative macOS menu bar application designed to monitor the Apple Content Cache metrics and provide them in a Prometheus-compatible format. The app reads the Metrics.db file from the system directory and serves the data via an integrated HTTP server, allowing administrators and DevOps teams to seamlessly visualize the caching infrastructure in tools such as Grafana.</p><p>In addition, we offer the <strong>ACCPromAdapterDaemon</strong> for headless installations. This daemon is ideal for server environments and headless Mac Minis where the service automatically starts at system boot and collects metrics even without a user login.</p><hr /><h2 id="what-is-accpromadapter"><span class="me-2">What is ACCPromAdapter?</span><a href="#what-is-accpromadapter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>ACCPromAdapter connects to the Apple Content Cache and reads the metrics from its associated Metrics.db file. The app intelligently determines whether to retrieve the metrics from an externally running daemon (HTTP server) or by directly accessing the local database. This dual approach ensures that current data is always available, regardless of whether the external service is operational.</p><hr /><h2 id="key-features"><span class="me-2">Key Features</span><a href="#key-features" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><strong>Automatic Environment Detection:</strong> On startup, the app checks if an external HTTP daemon is active to provide metrics. If so, these metrics are used; otherwise, the app falls back to the local Metrics.db.<li><strong>Prometheus-Compatible Output:</strong> The metrics are output in a format that can be directly scraped by Prometheus, enabling seamless integration into Grafana dashboards.<li><strong>User-Friendly Menu Bar Interface:</strong> A clear UI in the macOS menu bar displays the key metrics, complemented by a visual status indicator showing the active mode (external or local).<li><strong>Automatic Updates:</strong> Metrics are refreshed every 30 seconds, with a progress bar visually indicating the current update cycle.<li><strong>Headless Installation with ACCPromAdapterDaemon:</strong> For environments without user interaction—such as servers or headless Mac Minis—the ACCPromAdapterDaemon provides a fully automated solution. The daemon starts at system boot and continuously serves metrics that Prometheus can scrape.</ul><hr /><h2 id="technical-architecture"><span class="me-2">Technical Architecture</span><a href="#technical-architecture" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The app is written in <strong>Swift</strong> and leverages modern technologies such as Swift Concurrency (<code class="language-plaintext highlighter-rouge">async/await</code>), Combine, and SwiftNIO for network communication. It employs a modular architecture:</p><ul><li><strong>AppInitializer:</strong> Handles the central initialization of the application and determines whether to use external HTTP metrics or the local database.<li><strong>MetricsCache:</strong> Collects and updates metrics from the local database if no external daemon is available.<li><strong>MetricsFetcher:</strong> Retrieves metrics over HTTP when an external daemon is active.<li><strong>PrometheusServer:</strong> Launches an internal HTTP server that delivers Prometheus-compatible output as a fallback when no external service is present.<li><strong>ACCPromAdapterDaemon:</strong> A separate daemon designed specifically for headless installations. It runs system-wide, gathers metrics from Metrics.db, and exposes them via an HTTP endpoint without requiring a user login.</ul><hr /><h2 id="use-cases"><span class="me-2">Use Cases</span><a href="#use-cases" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>ACCPromAdapter is ideal for:</p><ul><li><strong>Administrators and IT Teams</strong> who need to monitor the performance and load of their Apple Content Cache.<li><strong>DevOps Teams</strong> who wish to build Grafana dashboards for real-time metrics visualization.<li><strong>Headless Environments</strong> where the ACCPromAdapterDaemon ensures continuous metrics collection even without user interaction.</ul><hr /><h2 id="installation--getting-started"><span class="me-2">Installation &amp; Getting Started</span><a href="#installation--getting-started" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>ACCPromAdapter App:</strong></p><ol><li><strong>Clone the Project:</strong><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>git clone https://github.com/MadChristian/ACCpromAdapter.git
<span class="nb">cd </span>ACCpromAdapter
</pre></table></code></div></div><li><strong>Open in Xcode:</strong><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>open ACCpromAdapter.xcodeproj
</pre></table></code></div></div><li>Set Up Code Signing:<ul><li>In Xcode, navigate to “Signing &amp; Capabilities” and enter your Developer ID as required.</ul><li>Run the App:<ul><li>Press Cmd + R to build and launch the app.</ul><li>Initial Configuration:<ul><li><h2 id="on-first-launch-you-will-be-prompted-to-select-the-metricsdb-file-to-configure-read-access"><span class="me-2">On first launch, you will be prompted to select the Metrics.db file to configure read access.</span><a href="#on-first-launch-you-will-be-prompted-to-select-the-metricsdb-file-to-configure-read-access" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>ACCPromAdapterDaemon (Optional): - Download the installation package ACCPromAdapterDaemon.pkg from GitHub Releases or as a direct download on the blog. - Install the daemon, which will automatically start at system boot.</p></ul></ol><p>Monitoring:</p><ul><li>Launch the app and monitor the metrics in the menu bar. If the external daemon is active, metrics will be retrieved via HTTP.</ul><p>Grafana Integration:</p><ul><li>Configure Prometheus to scrape metrics from:</ul><p>http://localhost:9200/metrics</p><p>Then, create a suitable dashboard in Grafana.</p><p>Conclusion</p><p>ACCPromAdapter and the ACCPromAdapterDaemon together provide a flexible and robust solution for monitoring Apple Content Cache metrics. With a dual strategy—retrieving metrics via an external HTTP daemon or directly from the local database—this innovative tool ensures that up-to-date and reliable data is always available. This empowers you to optimally monitor your caching infrastructure and identify potential issues early on.</p><p>Stay tuned for further updates and improvements to the ACCPromAdapter App!</p><p>Deployment</p><p>The latest version of the ACCpromAdapter App and the daemon is available as a release. Visit the Releases Page to download the installation package.</p><p>For any questions or feedback, please contact me via GitHub or by email.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/swift/'>Swift</a>, <a href='/categories/apple/'>Apple</a>, <a href='/categories/cache/'>Cache</a>, <a href='/categories/prometheus/'>Prometheus</a>, <a href='/categories/grafana/'>Grafana</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/monitoring/" class="post-tag no-text-decoration" >monitoring</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Dieser Eintrag ist vom Autor unter <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> lizensiert.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Teilen</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=ACCpromAdapter%20App%20%E2%80%93%20Monitoring%20und%20Analyse%20von%20Apple%20Content%20Cache%20Metriken%20-%20Christian%20Strube&url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fswift-ACCpromAdapter-App%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=ACCpromAdapter%20App%20%E2%80%93%20Monitoring%20und%20Analyse%20von%20Apple%20Content%20Cache%20Metriken%20-%20Christian%20Strube&u=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fswift-ACCpromAdapter-App%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fswift-ACCpromAdapter-App%2F&text=ACCpromAdapter%20App%20%E2%80%93%20Monitoring%20und%20Analyse%20von%20Apple%20Content%20Cache%20Metriken%20-%20Christian%20Strube" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fswift-ACCpromAdapter-App%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Link kopieren" data-title-succeed="Link erfolgreich kopiert!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Kürzlich aktualisiert</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/tunneldebugger/">TunnelDebugger Support</a><li class="text-truncate lh-lg"> <a href="/posts/Apple-Content-Cache-Grafana-Dashboard/">Apple Content Cache mit Grafana und Prometheus überwachen – Schritt-für-Schritt-Anleitung</a><li class="text-truncate lh-lg"> <a href="/posts/swift-apns/">Apple Push Notification Service mit Quart und Python: Ein Leitfaden</a><li class="text-truncate lh-lg"> <a href="/posts/swift-parken-app-0-0-4/">Parken App und Backend - Updates und Bugfixes</a><li class="text-truncate lh-lg"> <a href="/posts/swift-parken-app-0-0-5/">Parken App Updates 0.0.5</a></ul></div><div id="access-tags"><div class="panel-heading">Beliebte Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/networking/">networking</a> <a class="post-tag btn btn-outline-primary" href="/tags/swiftui/">swiftui</a> <a class="post-tag btn btn-outline-primary" href="/tags/backend/">backend</a> <a class="post-tag btn btn-outline-primary" href="/tags/combine/">combine</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">iOS</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/nginx/">nginx</a> <a class="post-tag btn btn-outline-primary" href="/tags/webserver/">webserver</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Inhalt</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Weiterlesen</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/Apple-Content-Cache-Grafana-Dashboard/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1741276346" data-df="DD/MM/YYYY" > 06/03/2025 </em><h4 class="pt-0 my-2" data-toc-skip>Apple Content Cache mit Grafana und Prometheus überwachen – Schritt-für-Schritt-Anleitung</h4><div class="text-muted small"><p> Apple Content Cache mit Grafana und Prometheus überwachen – Schritt-für-Schritt-Anleitung Introduction TL;DR: This guide explains why monitoring the Apple Content Cache is crucial for optimizing ...</p></div></div></a></div><div class="col"> <a href="/posts/Willkommen/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1640995200" data-df="DD/MM/YYYY" > 01/01/2022 </em><h4 class="pt-0 my-2" data-toc-skip>Technologie, Automatisierung und Künstliche Intelligenz – Der Blog von Christian Strube</h4><div class="text-muted small"><p> Willkommen auf dem Blog von Christian Strube, einem Ort, an dem Sie sich auf eine faszinierende Reise durch die Welt der Technologie und der Künstlichen Intelligenz (KI) begeben können. Hier finden...</p></div></div></a></div><div class="col"> <a href="/posts/tunneldebugger/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1744530676" data-df="DD/MM/YYYY" > 13/04/2025 </em><h4 class="pt-0 my-2" data-toc-skip>TunnelDebugger Support</h4><div class="text-muted small"><p> tunneldebugger – Der umfassende Support-Leitfaden Willkommen auf unserem Support-Blog für tunneldebugger – die App zur Netzwerk- und VPN-Diagnose! In diesem Beitrag erfährst du, wie meine App funk...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ansible-semaphore-updates/" class="btn btn-outline-primary" prompt="Eintrag vorher" ><p>Update - Ansible Semaphore</p></a> <a href="/posts/Apple-Content-Cache-Grafana-Dashboard/" class="btn btn-outline-primary" prompt="Nächster Eintrag" ><p>Apple Content Cache mit Grafana und Prometheus überwachen – Schritt-für-Schritt-Anleitung</p></a></div><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'Madchristian/Madchristian.github.io', 'data-repo-id': 'R_kgDOHkSiUQ', 'data-category': 'Posts', 'data-category-id': 'DIC_kwDOHkSiUc4CoKuq', 'data-mapping': 'pathname', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'de', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Beliebte Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/networking/">networking</a> <a class="post-tag btn btn-outline-primary" href="/tags/swiftui/">swiftui</a> <a class="post-tag btn btn-outline-primary" href="/tags/backend/">backend</a> <a class="post-tag btn btn-outline-primary" href="/tags/combine/">combine</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">iOS</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/nginx/">nginx</a> <a class="post-tag btn btn-outline-primary" href="/tags/webserver/">webserver</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme</p><p>© 2025 <a href="https://twitter.com/madchristian404">Christian Strube</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Alle Einträge auf dieser Seite stehen, soweit nicht anders angegeben, unter der Lizenz Creative Commons Attribution 4.0 (CC BY 4.0)." >Einige Rechte vorbehalten.</span></p></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">Eine neue Version ist verfügbar.</p><button type="button" class="btn btn-primary" aria-label="Update"> Neue Version </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/de.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RMF96QTHNP"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RMF96QTHNP'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
