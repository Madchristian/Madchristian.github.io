<!doctype html><html lang="de-DE" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Optimizing an iOS Application: Case Study of the Parkplatzmanager App" /><meta property="og:locale" content="de_DE" /><meta name="description" content="In the last couple of days, we’ve embarked on an exciting journey of improving and optimizing an iOS application, the parkplatzmanager app. In this blog post, we will walk you through some of the changes we made and how they led to a more efficient and well-structured app." /><meta property="og:description" content="In the last couple of days, we’ve embarked on an exciting journey of improving and optimizing an iOS application, the parkplatzmanager app. In this blog post, we will walk you through some of the changes we made and how they led to a more efficient and well-structured app." /><link rel="canonical" href="https://madchristian.github.io/posts/swift-optimizing-ios-app/" /><meta property="og:url" content="https://madchristian.github.io/posts/swift-optimizing-ios-app/" /><meta property="og:site_name" content="Christian Strube" /><meta property="og:image" content="https://images.cstrube.de/uploads/original/c4/85/426ac01432c4f36c3efe6e42c7d7.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-07-04T11:45:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://images.cstrube.de/uploads/original/c4/85/426ac01432c4f36c3efe6e42c7d7.webp" /><meta property="twitter:title" content="Optimizing an iOS Application: Case Study of the Parkplatzmanager App" /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-03-18T10:34:14+01:00","datePublished":"2023-07-04T11:45:00+02:00","description":"In the last couple of days, we’ve embarked on an exciting journey of improving and optimizing an iOS application, the parkplatzmanager app. In this blog post, we will walk you through some of the changes we made and how they led to a more efficient and well-structured app.","headline":"Optimizing an iOS Application: Case Study of the Parkplatzmanager App","image":{"lqip":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/2wBDAQcHBw0MDRgQEBgUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAPABQDAREAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAgMEBgf/xAArEAABAwMBAw0AAAAAAAAAAAACARESAAMEIQUxUQYTFSIjM0FTYnGCodH/xAAYAQEAAwEAAAAAAAAAAAAAAAACAAMEAf/EACQRAAEDAgQHAAAAAAAAAAAAAAEAAhEDEgQiUWETIUFSkrLi/9oADAMBAAIRAxEAPwDL8jbmZiLbW1klbt3EIU3aKK6u4lxrokkgIVC1oBIm5KLlnti2CAOQpiSusVD76lMMdqqDiGaHy+VK6ay25yfbThL1Si8dz0J5StVuaN1Xci4tyzaHJtmAgpwJ0R3XXfwqCQTCFVrXAXGIlDbDCTzF+QflMOfoqODS7vVFPIk0C76Tv4zePvVfRbJzTuv/2Q==","url":"https://images.cstrube.de/uploads/original/c4/85/426ac01432c4f36c3efe6e42c7d7.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://madchristian.github.io/posts/swift-optimizing-ios-app/"},"url":"https://madchristian.github.io/posts/swift-optimizing-ios-app/"}</script><title>Optimizing an iOS Application: Case Study of the Parkplatzmanager App | Christian Strube</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Christian Strube"><meta name="application-name" content="Christian Strube"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://images.cstrube.de/blog/images/mein-avatar/christian_space.webp" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">Christian Strube</a></div><div class="site-subtitle fst-italic">Technology, AI and Life</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>STARTSEITE</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>KATEGORIEN</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIV</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ÜBER</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/madchristian" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://bsky.app/profile/madchristian.bsky.social" aria-label="bluesky" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-bluesky"></i> </a> <a href="javascript:location.href = 'mailto:' + ['christian','cstrube.de'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/christian-strube-b93217102/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Startseite </a> </span> <span>Optimizing an iOS Application: Case Study of the Parkplatzmanager App</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Eintrag</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Suche..." > </span> <span id="search-cancel">Abbrechen</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>Optimizing an iOS Application: Case Study of the Parkplatzmanager App</h1><div class="post-meta text-muted"> <span> Veröffentlicht <em class="" data-ts="1688463900" data-df="DD/MM/YYYY" data-bs-toggle="tooltip" data-bs-placement="bottom" > 04/07/2023 </em> </span> <span> Aktualisiert <em class="" data-ts="1742290454" data-df="DD/MM/YYYY" data-bs-toggle="tooltip" data-bs-placement="bottom" > 18/03/2025 </em> </span><div class="mt-3 mb-3"> <a href="https://images.cstrube.de/uploads/original/c4/85/426ac01432c4f36c3efe6e42c7d7.webp" class="popup img-link preview-img"><img data-src="https://images.cstrube.de/uploads/original/c4/85/426ac01432c4f36c3efe6e42c7d7.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/2wBDAQcHBw0MDRgQEBgUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAPABQDAREAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAgMEBgf/xAArEAABAwMBAw0AAAAAAAAAAAACARESAAMEIQUxUQYTFSIjM0FTYnGCodH/xAAYAQEAAwEAAAAAAAAAAAAAAAACAAMEAf/EACQRAAEDAgQHAAAAAAAAAAAAAAEAAhEDEgQiUWETIUFSkrLi/9oADAMBAAIRAxEAPwDL8jbmZiLbW1klbt3EIU3aKK6u4lxrokkgIVC1oBIm5KLlnti2CAOQpiSusVD76lMMdqqDiGaHy+VK6ay25yfbThL1Si8dz0J5StVuaN1Xci4tyzaHJtmAgpwJ0R3XXfwqCQTCFVrXAXGIlDbDCTzF+QflMOfoqODS7vVFPIk0C76Tv4zePvVfRbJzTuv/2Q==" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> Von <em> <a href="https://twitter.com/madchristian404">Christian Strube</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="675 Wörter" > <em>3 Minuten</em> lesen</span></div></div></div><div class="post-content"><p>In the last couple of days, we’ve embarked on an exciting journey of improving and optimizing an iOS application, the <code class="language-plaintext highlighter-rouge">parkplatzmanager</code> app. In this blog post, we will walk you through some of the changes we made and how they led to a more efficient and well-structured app.</p><h2 id="introduction"><span class="me-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The <code class="language-plaintext highlighter-rouge">parkplatzmanager</code> app had been initially developed with a basic architecture, and as it grew in complexity, there were areas in the code that needed optimization and restructuring. Some of the issues we identified included ambiguous type inference, a lack of email validation, handling cache expiration, and dealing with data inconsistencies due to incorrect key-value mapping in the JSON response.</p><p>Let’s walk through how we tackled each of these issues.</p><h2 id="1-resolving-ambiguous-type-inference"><span class="me-2">1. Resolving Ambiguous Type Inference</span><a href="#1-resolving-ambiguous-type-inference" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Swift, like many other languages, performs type inference to determine the type of an expression when it’s not explicitly provided. However, sometimes the compiler might face difficulties in inferring the type of an expression, especially when multiple type possibilities exist. We encountered such an issue in the <code class="language-plaintext highlighter-rouge">ParkingService.swift</code> file:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">return</span> <span class="kt">Promise</span> <span class="p">{</span> <span class="n">seal</span> <span class="k">in</span>
    <span class="n">firstly</span> <span class="p">{</span>
        <span class="kt">RealDataRepository</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">fetchUserData</span><span class="p">(</span><span class="nv">userId</span><span class="p">:</span> <span class="n">userId</span><span class="p">,</span> <span class="nv">groupId</span><span class="p">:</span> <span class="n">groupId</span><span class="p">)</span>
    <span class="p">}</span><span class="o">.</span><span class="n">done</span> <span class="p">{</span> <span class="n">vehicleData</span> <span class="k">in</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="c1">// Process the data</span>
            <span class="n">seal</span><span class="o">.</span><span class="nf">fulfill</span><span class="p">(())</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="p">{</span>
            <span class="n">seal</span><span class="o">.</span><span class="nf">reject</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="o">.</span><span class="k">catch</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
        <span class="n">seal</span><span class="o">.</span><span class="nf">reject</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Here, Swift was unable to infer the type of <code class="language-plaintext highlighter-rouge">vehicleData</code>. To resolve this, we explicitly provided the type of the <code class="language-plaintext highlighter-rouge">vehicleData</code>:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kt">RealDataRepository</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">fetchUserData</span><span class="p">(</span><span class="nv">userId</span><span class="p">:</span> <span class="n">userId</span><span class="p">,</span> <span class="nv">groupId</span><span class="p">:</span> <span class="n">groupId</span><span class="p">)</span>
<span class="p">}</span><span class="o">.</span><span class="n">done</span> <span class="p">{</span> <span class="p">(</span><span class="nv">vehicleData</span><span class="p">:</span> <span class="p">[</span><span class="kt">Vehicle</span><span class="p">])</span> <span class="k">in</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="c1">// Process the data</span>
        <span class="n">seal</span><span class="o">.</span><span class="nf">fulfill</span><span class="p">(())</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="p">{</span>
        <span class="n">seal</span><span class="o">.</span><span class="nf">reject</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
</pre></table></code></div></div><h2 id="2-enforcing-email-validation"><span class="me-2">2. Enforcing Email Validation</span><a href="#2-enforcing-email-validation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In the <code class="language-plaintext highlighter-rouge">InviteView.swift</code> file, we observed that the app did not validate emails, potentially leading to incorrect or invalid email addresses being accepted.</p><p>We first introduced a method <code class="language-plaintext highlighter-rouge">isValidEmail(_ email: String) -&gt; Bool</code> which was initially left as a placeholder. Later, we added a simple email validation logic:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">private</span> <span class="kd">func</span> <span class="nf">isValidEmail</span><span class="p">(</span><span class="n">_</span> <span class="nv">email</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">emailRegex</span> <span class="o">=</span> <span class="s">"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+</span><span class="se">\\</span><span class="s">.[A-Za-z]{2,}"</span>
    <span class="k">let</span> <span class="nv">emailTest</span> <span class="o">=</span> <span class="kt">NSPredicate</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span><span class="s">"SELF MATCHES %@"</span><span class="p">,</span> <span class="n">emailRegex</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">emailTest</span><span class="o">.</span><span class="nf">evaluate</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">email</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Furthermore, we made the text field in SwiftUI ignore auto-capitalization, ensuring that only lower case characters are allowed:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kt">TextField</span><span class="p">(</span><span class="s">"Email"</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="err">$</span><span class="n">email</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">keyboardType</span><span class="p">(</span><span class="o">.</span><span class="n">emailAddress</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">autocapitalization</span><span class="p">(</span><span class="o">.</span><span class="k">none</span><span class="p">)</span>
</pre></table></code></div></div><h2 id="3-handling-cache-expiration"><span class="me-2">3. Handling Cache Expiration</span><a href="#3-handling-cache-expiration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Our app uses Redis for caching, and we identified a need to set a time-to-live (TTL) or expiration for our keys to control the freshness of the data. This can be done using the <code class="language-plaintext highlighter-rouge">EXPIRE</code> command in Redis:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">await</span> <span class="n">redis</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">vehicle</span><span class="p">))</span>
<span class="k">await</span> <span class="n">redis</span><span class="p">.</span><span class="nf">expire</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>  <span class="c1"># Set a TTL of 300 seconds
</span></pre></table></code></div></div><h2 id="4-addressing-json-key-value-mapping-inconsistencies"><span class="me-2">4. Addressing JSON Key-Value Mapping Inconsistencies</span><a href="#4-addressing-json-key-value-mapping-inconsistencies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The application experienced crashes due to mismatches between the expected and received JSON data, particularly a missing <code class="language-plaintext highlighter-rouge">vehicle</code> key. We realized that the received JSON’s structure was not what the app expected.</p><p>To fix this, we updated our model to match</p><p>the actual data received, ensuring that the keys in the Swift model matched the keys in the JSON data.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Kopiert!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">ResponseData</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">status</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">Vehicle</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">Vehicle</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">_id</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">fullName</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="k">let</span> <span class="nv">groupId</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">latitude</span><span class="p">:</span> <span class="kt">Double</span>
    <span class="k">let</span> <span class="nv">licensePlate</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">longitude</span><span class="p">:</span> <span class="kt">Double</span>
    <span class="k">let</span> <span class="nv">timestamp</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">userId</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">vehicleStatus</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">vin</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    
    <span class="kd">enum</span> <span class="kt">CodingKeys</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CodingKey</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">_id</span>
        <span class="k">case</span> <span class="n">fullName</span>
        <span class="k">case</span> <span class="n">groupId</span> <span class="o">=</span> <span class="s">"group_id"</span>
        <span class="k">case</span> <span class="n">latitude</span>
        <span class="k">case</span> <span class="n">licensePlate</span> <span class="o">=</span> <span class="s">"license_plate"</span>
        <span class="k">case</span> <span class="n">longitude</span>
        <span class="k">case</span> <span class="n">timestamp</span>
        <span class="k">case</span> <span class="n">userId</span> <span class="o">=</span> <span class="s">"user_id"</span>
        <span class="k">case</span> <span class="n">vehicleStatus</span> <span class="o">=</span> <span class="s">"vehicle_status"</span>
        <span class="k">case</span> <span class="n">vin</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Optimizing an app often involves refactoring and improving the existing code to ensure it’s efficient, scalable, and maintainable. In our case, we were able to solve type inference ambiguity, improve data validation, handle cache expiration, and deal with JSON key-value inconsistencies. These changes significantly improved the <code class="language-plaintext highlighter-rouge">parkplatzmanager</code> app’s robustness and efficiency, and we hope this walkthrough was insightful and helpful!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/programming/'>Programming</a>, <a href='/categories/swift/'>Swift</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/networking/" class="post-tag no-text-decoration" >networking</a> <a href="/tags/app-optimization/" class="post-tag no-text-decoration" >app optimization</a> <a href="/tags/location-tracking/" class="post-tag no-text-decoration" >location tracking</a> <a href="/tags/combine/" class="post-tag no-text-decoration" >combine</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Dieser Eintrag ist vom Autor unter <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> lizensiert.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Teilen</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Optimizing%20an%20iOS%20Application:%20Case%20Study%20of%20the%20Parkplatzmanager%20App%20-%20Christian%20Strube&url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fswift-optimizing-ios-app%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Optimizing%20an%20iOS%20Application:%20Case%20Study%20of%20the%20Parkplatzmanager%20App%20-%20Christian%20Strube&u=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fswift-optimizing-ios-app%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fswift-optimizing-ios-app%2F&text=Optimizing%20an%20iOS%20Application:%20Case%20Study%20of%20the%20Parkplatzmanager%20App%20-%20Christian%20Strube" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmadchristian.github.io%2Fposts%2Fswift-optimizing-ios-app%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Link kopieren" data-title-succeed="Link erfolgreich kopiert!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Kürzlich aktualisiert</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/tunneldebugger/">TunnelDebugger Support</a><li class="text-truncate lh-lg"> <a href="/posts/Apple-Content-Cache-Grafana-Dashboard/">Apple Content Cache mit Grafana und Prometheus überwachen – Schritt-für-Schritt-Anleitung</a><li class="text-truncate lh-lg"> <a href="/posts/swift-apns/">Apple Push Notification Service mit Quart und Python: Ein Leitfaden</a><li class="text-truncate lh-lg"> <a href="/posts/swift-parken-app-0-0-4/">Parken App und Backend - Updates und Bugfixes</a><li class="text-truncate lh-lg"> <a href="/posts/swift-parken-app-0-0-5/">Parken App Updates 0.0.5</a></ul></div><div id="access-tags"><div class="panel-heading">Beliebte Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/networking/">networking</a> <a class="post-tag btn btn-outline-primary" href="/tags/swiftui/">swiftui</a> <a class="post-tag btn btn-outline-primary" href="/tags/backend/">backend</a> <a class="post-tag btn btn-outline-primary" href="/tags/combine/">combine</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">iOS</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/nginx/">nginx</a> <a class="post-tag btn btn-outline-primary" href="/tags/webserver/">webserver</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Inhalt</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Weiterlesen</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/swift-improving-location-tracking/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1688481900" data-df="DD/MM/YYYY" > 04/07/2023 </em><h4 class="pt-0 my-2" data-toc-skip>Improving Location Tracking in an iOS Application: Case Study of the Parkplatzmanager App</h4><div class="text-muted small"><p> In today’s blog post, we’ll be exploring how we can leverage Apple’s SwiftUI and Combine frameworks to improve location tracking within our iOS apps. Our use case involves a parking management app,...</p></div></div></a></div><div class="col"> <a href="/posts/swift-debugging-network-requests-in-ios/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1688036400" data-df="DD/MM/YYYY" > 29/06/2023 </em><h4 class="pt-0 my-2" data-toc-skip>Debugging Network Requests in iOS with Swift</h4><div class="text-muted small"><p> Debugging Network Requests in iOS with Swift In this article, we are going to discuss an essential part of every mobile application that interacts with a backend server - network requests. Specifi...</p></div></div></a></div><div class="col"> <a href="/posts/swift-working-with-combine/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1688205600" data-df="DD/MM/YYYY" > 01/07/2023 </em><h4 class="pt-0 my-2" data-toc-skip>Handling Asynchronous Tasks in iOS with Combine</h4><div class="text-muted small"><p> Working with Combine Framework In modern iOS development, handling asynchronous tasks efficiently is crucial. While there are several ways to handle asynchronous tasks in Swift, including closures...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/github-einfuehrung-teil2/" class="btn btn-outline-primary" prompt="Eintrag vorher" ><p>Grundlagen zur Nutzung von Github Teil 2</p></a> <a href="/posts/swift-improving-location-tracking/" class="btn btn-outline-primary" prompt="Nächster Eintrag" ><p>Improving Location Tracking in an iOS Application: Case Study of the Parkplatzmanager App</p></a></div><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'Madchristian/Madchristian.github.io', 'data-repo-id': 'R_kgDOHkSiUQ', 'data-category': 'Posts', 'data-category-id': 'DIC_kwDOHkSiUc4CoKuq', 'data-mapping': 'pathname', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'de', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Beliebte Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/networking/">networking</a> <a class="post-tag btn btn-outline-primary" href="/tags/swiftui/">swiftui</a> <a class="post-tag btn btn-outline-primary" href="/tags/backend/">backend</a> <a class="post-tag btn btn-outline-primary" href="/tags/combine/">combine</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">iOS</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/nginx/">nginx</a> <a class="post-tag btn btn-outline-primary" href="/tags/webserver/">webserver</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme</p><p>© 2025 <a href="https://twitter.com/madchristian404">Christian Strube</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Alle Einträge auf dieser Seite stehen, soweit nicht anders angegeben, unter der Lizenz Creative Commons Attribution 4.0 (CC BY 4.0)." >Einige Rechte vorbehalten.</span></p></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">Eine neue Version ist verfügbar.</p><button type="button" class="btn btn-primary" aria-label="Update"> Neue Version </button></div></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/de.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RMF96QTHNP"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RMF96QTHNP'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
